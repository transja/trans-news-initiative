import{$ as le,H as J,ae as P,N as b,h as I,a3 as W,I as O,w as Q,af as se,K as ue,M as U,s as D,T as C,a6 as te,O as j,Q as S,R as ve,ag as M,aa as ee,q as de,Z,ah as L,ai as $,aj as q,y as _e,X as z,ak as oe,al as he,a9 as ce,am as me,an as ae,ao as Ee,a2 as re,i as pe,a7 as Te,a5 as Ae}from"./CRlJX9sK.js";import{b as F,c as Ie}from"./Du6mb_uw.js";function He(f,e){return e}function we(f,e,a,u){for(var o=[],t=e.length,l=0;l<t;l++)he(e[l].e,o,!0);var h=t>0&&o.length===0&&a!==null;if(h){var v=a.parentNode;ce(v),v.append(a),u.clear(),g(f,e[0].prev,e[t-1].next)}me(o,()=>{for(var c=0;c<t;c++){var d=e[c];h||(u.delete(d.k),g(f,d.prev,d.next)),ae(d.e,!h)}})}function be(f,e,a,u,o,t=null){var l=f,h={flags:e,items:new Map,first:null},v=(e&P)!==0;if(v){var c=f;l=I?b(W(c)):c.appendChild(le())}I&&O();var d=null,T=!1,i=se(()=>{var _=a();return pe(_)?_:_==null?[]:ee(_)});J(()=>{var _=Q(i),r=_.length;if(T&&r===0)return;T=r===0;let w=!1;if(I){var E=l.data===ue;E!==(r===0)&&(l=U(),b(l),D(!1),w=!0)}if(I){for(var p=null,A,m=0;m<r;m++){if(C.nodeType===8&&C.data===te){l=C,w=!0,D(!1);break}var n=_[m],s=u(n,m);A=ne(C,h,p,null,n,s,m,o,e,a),h.items.set(s,A),p=A}r>0&&b(U())}I||Re(_,h,l,o,e,u,a),t!==null&&(r===0?d?j(d):d=S(()=>t(l)):d!==null&&ve(d,()=>{d=null})),w&&D(!0),Q(i)}),I&&(l=C)}function Re(f,e,a,u,o,t,l){var Y,V,X,B;var h=(o&oe)!==0,v=(o&(L|q))!==0,c=f.length,d=e.items,T=e.first,i=T,_,r=null,w,E=[],p=[],A,m,n,s;if(h)for(s=0;s<c;s+=1)A=f[s],m=t(A,s),n=d.get(m),n!==void 0&&((Y=n.a)==null||Y.measure(),(w??(w=new Set)).add(n));for(s=0;s<c;s+=1){if(A=f[s],m=t(A,s),n=d.get(m),n===void 0){var ie=i?i.e.nodes_start:a;r=ne(ie,e,r,r===null?e.first:r.next,A,m,s,u,o,l),d.set(m,r),E=[],p=[],i=r.next;continue}if(v&&ge(n,A,s,o),(n.e.f&M)!==0&&(j(n.e),h&&((V=n.a)==null||V.unfix(),(w??(w=new Set)).delete(n))),n!==i){if(_!==void 0&&_.has(n)){if(E.length<p.length){var H=p[0],R;r=H.prev;var x=E[0],k=E[E.length-1];for(R=0;R<E.length;R+=1)G(E[R],H,a);for(R=0;R<p.length;R+=1)_.delete(p[R]);g(e,x.prev,k.next),g(e,r,x),g(e,k,H),i=H,r=k,s-=1,E=[],p=[]}else _.delete(n),G(n,i,a),g(e,n.prev,n.next),g(e,n,r===null?e.first:r.next),g(e,r,n),r=n;continue}for(E=[],p=[];i!==null&&i.k!==m;)(i.e.f&M)===0&&(_??(_=new Set)).add(i),p.push(i),i=i.next;if(i===null)continue;n=i}E.push(n),r=n,i=n.next}if(i!==null||_!==void 0){for(var N=_===void 0?[]:ee(_);i!==null;)(i.e.f&M)===0&&N.push(i),i=i.next;var y=N.length;if(y>0){var fe=(o&P)!==0&&c===0?a:null;if(h){for(s=0;s<y;s+=1)(X=N[s].a)==null||X.measure();for(s=0;s<y;s+=1)(B=N[s].a)==null||B.fix()}we(e,N,fe,d)}}h&&de(()=>{var K;if(w!==void 0)for(n of w)(K=n.a)==null||K.apply()}),Z.first=e.first&&e.first.e,Z.last=r&&r.e}function ge(f,e,a,u){(u&L)!==0&&$(f.v,e),(u&q)!==0?$(f.i,a):f.i=a}function ne(f,e,a,u,o,t,l,h,v,c){var d=(v&L)!==0,T=(v&Ee)===0,i=d?T?_e(o):z(o):o,_=(v&q)===0?l:z(l),r={i:_,v:i,k:t,a:null,e:null,prev:a,next:u};try{return r.e=S(()=>h(f,i,_,c),I),r.e.prev=a&&a.e,r.e.next=u&&u.e,a===null?e.first=r:(a.next=r,a.e.next=r.e),u!==null&&(u.prev=r,u.e.prev=r.e),r}finally{}}function G(f,e,a){for(var u=f.next?f.next.e.nodes_start:a,o=e?e.e.nodes_start:a,t=f.e.nodes_start;t!==u;){var l=re(t);o.before(t),t=l}}function g(f,e,a){e===null?f.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ke(f,e,a,u,o){var t=f,l="",h;J(()=>{if(l===(l=e()??"")){I&&O();return}h!==void 0&&(ae(h),h=void 0),l!==""&&(h=S(()=>{if(I){C.data;for(var v=O(),c=v;v!==null&&(v.nodeType!==8||v.data!=="");)c=v,v=re(v);if(v===null)throw Te(),Ae;F(C,c),t=b(v);return}var d=l+"",T=Ie(d);F(W(T),T.lastChild),t.before(T)}))})}export{be as e,ke as h,He as i};
